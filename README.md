# 北航志愿星🌟后端文档

## requirements
```txt
Django==4.2.6
PyMySQL==1.1.0
```

## run server
在backend目录下运行
```python 
python manage.py runserver 0.0.0.0:8000
```

## 图床托管
采用tomcat服务器进行图片和文件的托管，需要在运行前进入tomcat安装目录中并运行以下命令
```bash
cd bin
./startup.sh
```

## django简介
Django 是一个开源的 Web 应用框架，用 Python 编写而成。它提供了一套完整的工具和库，用于构建和管理网站。

以下是 Django 的一些关键特点：
- 快速开发：Django 旨在减少开发过程中的冗余工作，让开发者能够快速构建应用。
- 安全性：Django 包含了许多安全特性，如内置的反 CSRF 保护、XSS 过滤器和 SQL 注入保护等。
- MVC 架构：Django 遵循 MVC（模型-视图-控制器）设计模式，这有助于分离应用程序的不同部分，从而提高代码的可维护性。
数据库迁移：Django 提供了一套简单的数据库迁移系统，允许开发者轻松地管理数据库模式的变化。
- 国际化：Django 支持多语言，并且可以轻松地适应不同的地区设置。
- 自带的后台管理界面：Django 包含了一个强大的后台管理界面，允许开发者管理网站内容、用户和其他数据。
- 扩展性：Django 有一个庞大的第三方库生态系统，可以通过安装和使用这些库来扩展 Django 的功能。
- 社区支持：Django 有一个活跃的开发者社区，提供大量的文档、教程和支持。

Django 通常用于构建新闻网站、企业网站、社交网络和在线购物平台等。它的流行和成功归功于其易用性、灵活性和安全性。开发者在选择 Django 时，可以充分利用其提供的功能和工具，快速开发出高质量的网络应用。


## 功能结构
网站实现了一下几个系统：用户系统，团队系统，项目系统，通知系统

用户系统实现了基本的用户登录注册、修改个人信息、上传用户头像、

团队系统包含了三类权限的用户：系统管理员(administer)、团队管理员(manager)、和普通用户(student)
实现了创建团队


## 项目结构




## 总结感悟
@amor-mio-de-mi-vida: 这一次数据库的大作业是让我们实现一个小网站， 刚听到的时候还是很有挑战性的感觉无从下手。幸亏在此之前搞了一个小项目在其中我负责后端的部分对Django架构有一些了解并且参与过一些服务器的维护工作。在本次大作业中我承担了后端部分的工作和api文档设计的敲定工作。

- 项目初期：我们是在9月12号组好队伍并且开始进行大作业选题的设计。一开始大家的idea天马行空，并且我们参照了往届学长的优秀的作品和一些现实的迫切需求：每个学期我们都会有志愿时长的要求，但是在平常的学习生活中活动比较少，发布志愿信息都是辅导员在微信群里发布，同学们很容易的错过。同学们需要志愿时长的时候不知道该去哪里询问，同时志愿活动组织者有时也会急需志愿者从而发一些很急的招募。根据这个现实的需求我们敲定了要做一个统计发布志愿的数据库平台（像博雅的网站一样）。从而满足各方面的需求。（也算是做一些实用的有意义的事情）我们总结了初步的需求分析，设计了基本的E-R图，确立了"普通同学-团队管理员-系统管理员"的用户管理模式。在这个过程中，我们也根据理论课程的学习和新需求的发现随时的调整和丰富我们的功能。方便我们的用户进行使用。此阶段的重心是放在需求的确定和数据库的设计上，设计出来的好的架构具有的可扩展性也为我们后续的迭代开发奠定了良好的基础。


- 项目中期：到了初步实现的环节。一开始我是一口气写完了大部分的功能，但是由于没有清晰的思路。在测试的时候遇到了很多实现上的问题。多个api的相互依赖导致测试流程非常复杂、django前后端通信时的跨域访问的问题、图片图床的配置和环境的设置等。开发和测试也遇到了很多的瓶颈。这个时间段我们的重心放在具体bug的解决上，我们增加了沟通的频率，同时通过画出数据流图和功能结构图将用户的功能（各种api的接口）进行分类来使我们思路更加清晰。将整个项目分成不同的模块分而治之，有效的控制了复杂性。同时（根据之前项目的经验）我们选定了tomcat这个轻量级服务器来托管我们的图片和文件内容。我们也借助了chatgpt和官方文档，锻炼了我们解决问题的能力。同时通过与其他组同学的交流，我们使用了apifox这个实用的网站开发工具来设计api，使得前后端能够高效开发，也锻炼了我们沟通交流的能力，增进了我们组员之间的感情。


- 项目后期：后期尽管有很多的ddl和考试要准备，我们还是坚持每周一次的讨论和修改来完善我们的网站。其实在后期我们提出了更多新的功能(感觉更用户友好的)，有了前期的调试经验，我们已经能比较熟练的进行前后端的联合运行。在后期我们其实把重心的大部分放在了美工上，我们尽量让我们的网站更加的美观。负责前端的同学也找了很多fancy的组件实现了很多有趣的feature。同时我们也设计了自己的logo、总结了工作流图和系统架构图、丰富了文档结构。回看之前的微信聊天和github上的commit的记录也发现自己收获了很多。


### 问题反思

在完成大作业的过程中我们也遇到了一些问题获得了一些经验教训

- 我们是边开发边敲定api,同时前后端对api中某些类型的需求不同导致频繁修改需求和api文档。我们应该在最开始的时候就完成需求的确定和下一步迭代的展望。一个阶段一个阶段的开发这样就减少了很多微调的负担。在合作开发方面我们还需进一步的商讨和加强。

- 对于github的使用方面，我们是前端后端放在了不同的分支上，并且没有区分debug和release版本。由于我们没有租用服务器导致在本地同时运行前后端调试时复杂繁琐。同时我们没有设置管理员管理分支之间的merge问题（还好整体的项目规模较小，加上我们即时的沟通，没有出现很大的问题）。不过也是需要改进。

- 对于总体的设计方面还是需要加强。对于实体的设计我们进行了多次的重构，同时对于一些约束思考的还不是特别细致。对于一些保护（我们目前假定用户还是正常使用我们的网站不会恶意hack）没有深入考虑，事实上这些都是在开发过程中很重要的问题。

### 未来展望

由于时间的原因，我们还有一些有趣的idea和feature没有实现。

- （如果以后能开放给大家用的话）maybe首先需要将它放到服务器上去部署，同时可能还要考虑一些性能访问上的问题。

- 还有一些可以扩展的功能，比如支持点赞收藏、支持个性推荐等。

- maybe美化方面还可以继续做一些工作，还有就是跨平台的设计（我们希望我们的用户在手机上也能访问、要不然签到功能会显得很傻）。

### 总结

虽然只有13周的课程，但是数据库这门课通过理论的学习和实际开发的实现我们学到了很多。在数据库设计方面我们通过实践巩固了理论知识、在工程开发方面，我们有了合作开发流程项目模块管理的经验、在团队协作方面，我们增进了对彼此的了解并且共同完成了一项具有挑战性的任务。非常感谢老师和助教给予的这次机会，我们能够通过这次任务获得成长。这一次的作业凝聚着每个人的努力，每个人都作出了很大的贡献。
